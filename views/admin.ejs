<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://uninest.com.bd/wp-content/uploads/2025/12/logo-white.webp">
<title>Admin Dashboard</title>

<style>
:root {
  --primary: #0b0d1c;
  --bg: #f4f4f6;
  --card: #ffffff;
  --muted: #6b7280;
  --border: #e5e7eb;
}

* { box-sizing: border-box; font-family: Inter, system-ui, sans-serif; }

body {
  margin: 0;
  background: var(--bg);
}

.tabs {
  display: flex;
  justify-content: center;
  background: #8301ce;
  padding: 6px;
  gap: 17px;
}

.tab {
  padding: 10px 22px;
  border-radius: 99px;
  cursor: pointer;
  font-weight: 500;
  color: #ffffff;
}

.tab.active {
  background: white;
  color: #8301ce;
}

/* Card */
.card {
  background: var(--card);
  margin-top: 20px;
  padding: 20px;
  border-radius: 14px;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card-header h2 {
  margin: 0;
}

.subtitle {
  color: var(--muted);
  font-size: 14px;
}

/* Button */
.btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
}

.search {
  margin: 16px 0;
  padding: 10px 14px;
  width: 100%;
  border-radius: 10px;
  border: 1px solid var(--border);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  text-align: left;
  padding: 14px;
  border-bottom: 1px solid var(--border);
  font-size: 14px;
}

th {
  color: var(--muted);
  font-weight: 600;
}

.status {
  background: var(--primary);
  color: white;
  padding: 4px 12px;
  border-radius: 999px;
  font-size: 12px;
}

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
}

.modal.active {
  display: flex;
}

.modal-box {
  background: white;
  width: 520px;
  border-radius: 16px;
  padding: 20px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h3 {
  margin: 0;
}

.close {
  cursor: pointer;
  font-size: 20px;
}

/* Form */
.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-top: 16px;
}

.form-grid input {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 20px;
}

/* Payments row */
.payment-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid var(--border);
}

/* Costs: Budget grid */
.budget-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px;
  margin-top: 16px;
}

.budget-card {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
}

.budget-title {
  font-size: 14px;
  color: var(--muted);
}

.budget-amount {
  font-size: 20px;
  font-weight: 700;
  margin-top: 6px;
}

.budget-sub {
  font-size: 13px;
  color: var(--muted);
}

.budget-util {
  margin-top: 6px;
  font-size: 13px;
  color: #2563eb;
}

/* Voucher row */
.voucher-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border: 1px solid var(--border);
  border-radius: 14px;
  margin-top: 12px;
}

/* Light button */
.light-btn {
  background: #fff;
  color: #000;
  border: 1px solid var(--border);
}

.badge {
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 12px;
  margin-left: 6px;
}

.badge.completed {
  background: #000;
  color: #fff;
}

.badge.delayed {
  background: #ffe4cc;
  color: #c2410c;
}

.milestone-card {
  border: 1px solid var(--border);
  padding: 16px;
  border-radius: 12px;
  margin-top: 14px;
  display: flex;
  justify-content: space-between;
}

.delay-box {
  margin-top: 10px;
  background: #fff4e5;
  padding: 10px;
  border-radius: 8px;
  font-size: 13px;
}

/* ===== FIX light button rendering ===== */
.btn.light-btn {
  background-color: #f3f4f6 !important;
  color: #111827 !important;
  border: 1px solid #e5e7eb !important;

  padding: 10px 16px;
  border-radius: 10px;

  display: inline-flex;
  align-items: center;
  gap: 6px;

  font-size: 14px;
  font-weight: 500;
  line-height: 1;

  cursor: pointer;
}

/* Emoji size fix */
.btn.light-btn span,
.btn.light-btn::first-letter {
  font-size: 13px;
}

/* Hover */
.btn.light-btn:hover {
  background-color: #e5e7eb !important;
}

/* Click */
.btn.light-btn:active {
  transform: scale(0.97);
}

.gallery-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:18px;
}

.gallery-card{
  border:1px solid var(--border);
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
  background:#fff;
  position:relative;
}

.gallery-card img{
  width:100%;
  height:180px;
  object-fit:cover;
}

.gallery-info{
  padding:12px;
}

.media-badge{
  position:absolute;
  top:10px;
  left:10px;
  background:#fff;
  padding:4px 8px;
  border-radius:8px;
  font-size:12px;
  font-weight:600;
}

.upload-box {
  border: 2px dashed var(--border, #e5e7eb);
  border-radius: 12px;
  padding: 28px;
  text-align: center;
  cursor: pointer;
  color: var(--muted, #6b7280);
  transition: all 0.2s ease;
}

.upload-box:hover {
  background: #f9fafb;
}

.upload-box.has-file {
  border-color: #22c55e;
  color: #16a34a;
  font-weight: 500;
}

.switch-menu {
  position: absolute;
  top: 55px;
  right: 20px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 10px 25px rgba(0,0,0,.2);
  overflow: hidden;
  z-index: 1000;
}

.switch-menu div {
  padding: 12px 18px;
  cursor: pointer;
}

.switch-menu div:hover {
  background: #f2f2f2;
}

/* Hide helper */
/* Hide helper */
.hidden {
  display: none !important;
}

/* CENTER SUCCESS POPUP */
.success-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #e9e9e9;
  color: #047857;
  padding: 77px 77px;
  border-radius: 9px;
  font-weight: 500;
  font-size: 15px;
  display: flex;
  /* align-items: center; */
  gap: 12px;
  box-shadow: 0 14px 35px rgba(0,0,0,.25);
  z-index: 99999;
  animation: popIn .25s ease-out;
}

/* Subtle scale-in animation */
@keyframes popIn {
  from {
    transform: translate(-50%, -50%) scale(.9);
    opacity: 0;
  }
  to {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

@keyframes slideIn {
  from {
    transform: translateY(-10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

</style>
</head>
<body>
<div class="tabs">
  <div class="tab active" onclick="showTab('shareholders', this)">Shareholders</div>
  <div class="tab" onclick="showTab('payments', this)">Payments</div>
  <div class="tab" onclick="showTab('costs', this)">Costs</div>
  <div class="tab" onclick="showTab('milestones', this)">Milestones</div>
  <div class="tab" onclick="showTab('gallery', this)">Gallery</div>
  <div class="tab" onclick="showTab('customization', this)">Customization</div>
  <div class="tab" onclick="openSwitchProjectMenu(event)">Switch Project &#9660;
</div>
</div>

<div id="switchProjectMenu" class="switch-menu hidden">
  <div onclick="switchProject('UniNest Aurora')">UniNest Aurora</div>
  <div onclick="switchProject('UniNest Green Escape')">UniNest Green Escape</div>
  <div onclick="switchProject('UniNest Godhuli')">UniNest Godhuli</div>
</div>

<div id="shareholdersView">
<div class="card">
  <div class="card-header">
    <div>
      <h2>Manage Shareholders</h2>
      <div class="subtitle">View and manage all shareholder information</div>
    </div>
    <button class="btn" onclick="openModal()">Ôºã Add Shareholder</button>
  </div>
  </div>
  <!-- <input class="search" placeholder="Search by name, flat number, or share ID..."> -->
  <table>
    <thead>
      <tr>
        <th>Share ID</th>
        <th>Name</th>
        <th>Flat</th>
        <th>Contact</th>
        <th>Total Payment</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
<tbody id="tableBody">
  <tr>
    <td>SH-SHEJ-7788</td>
    <td>Shejahan Sharif</td>
    <td>B-402</td>
    <td>
      +88017787788
    </td>
    <td>3,50,000</td>
    <td><span class="status">Active</span></td>
    <td>‚úèÔ∏è</td>
  </tr>
</tbody>

  </table>
</div>

<!-- PAYMENTS VIEW -->
<div class="card" id="paymentsView">

  <div class="card-header">
    <div>
      <h2>Manage Payments</h2>
      <div class="subtitle">Add shareholder payments</div>
    </div>
    <button class="btn" onclick="openPaymentModal()">Ôºã Add Payment</button>
  </div>

  <!-- Payment Item -->
  <div class="payment-row">
    <div>
      <strong>Maryam (A-504)</strong>
      <div class="subtitle">5th Construction Installment</div>
      <div class="subtitle">
        RDC-2024-0523 ‚Ä¢ 2024-05-28 ‚Ä¢
      </div>
    </div>
    <div style="text-align:right">
      <strong>‡ß≥4,50,000</strong><br>
      <button class="btn" style="margin-top:6px;background:#fff;color:#000;border:1px solid var(--border)">
        View Receipt
      </button>
    </div>
  </div>

  <div class="payment-row">
    <div>
      <strong>Musab (A-505)</strong>
      <div class="subtitle">5th Construction Installment</div>
      <div class="subtitle">
        RDC-2024-0531 ‚Ä¢ 2024-06-02 ‚Ä¢
      </div>
    </div>
    <div style="text-align:right">
      <strong>‡ß≥4,50,000</strong><br>
      <button class="btn" style="margin-top:6px;background:#fff;color:#000;border:1px solid var(--border)">
        View Receipt
      </button>
    </div>
  </div>

  <div class="payment-row">
    <div>
      <strong>Maymuna (B-601)</strong>
      <div class="subtitle">5th Construction Installment</div>
      <div class="subtitle">
        RDC-2024-0527 ‚Ä¢ 2024-05-30 ‚Ä¢
        <span style="color:orange">Pending</span>
      </div>
    </div>
    <div style="text-align:right">
      <strong>‡ß≥5,20,000</strong><br>
      <button class="btn" style="margin-top:6px;background:#fff;color:#000;border:1px solid var(--border)">
        View Receipt
      </button>
    </div>
  </div>

</div>

<!-- COSTS VIEW -->
<div class="card" id="costsView" style="display:none">

  <!-- Header -->
  <div class="card-header">
    <div>
      <h2>Manage Project Costs</h2>
      <div class="subtitle">Update budget allocation and add vendor vouchers</div>
    </div>
    <div style="display:flex;gap:10px">
      <button class="btn" onclick="openVoucherModal()">Ôºã Add Voucher</button>
    </div>
  </div>

  <!-- Budget Overview -->
  <h3 style="margin-top:24px">Budget Overview</h3>

  <div class="budget-grid">

    <div class="budget-card">
      <div class="budget-title">Steel/Rebar</div>
      <div class="budget-amount">‡ß≥28,50,000</div>
    </div>

    <div class="budget-card">
      <div class="budget-title">Cement/Aggregate</div>
      <div class="budget-amount">‡ß≥21,00,000</div>
    </div>

    <div class="budget-card">
      <div class="budget-title">Labor & Manpower</div>
      <div class="budget-amount">‡ß≥25,00,000</div>
    </div>

    <div class="budget-card">
      <div class="budget-title">Finishing Materials</div>
      <div class="budget-amount">‡ß≥12,00,000</div>
    </div>

    <div class="budget-card">
      <div class="budget-title">Other Expenses</div>
      <div class="budget-amount">‡ß≥6,00,000</div>
    </div>

  </div>

  <!-- Recent Vouchers -->
  <h3 style="margin-top:28px">Recent Vouchers</h3>

  <div class="voucher-row">
    <div>
      <strong>Steel Rebar ‚Äì 5th Floor Slab</strong>
      <div class="subtitle">Jindal Steel Suppliers</div>
      <div class="subtitle">
        VCH-2024-089 ‚Ä¢ 2024-05-15 ‚Ä¢ Steel/Rebar
      </div>
    </div>
    <div style="text-align:right">
      <strong>‡ß≥4,25,000</strong><br>
      <button class="btn light-btn">View Invoice</button>
    </div>
  </div>

</div>

<div class="card" id="milestonesView" style="display:none">

  <div class="card-header">
    <div>
      <h2>Manage Construction Milestones</h2>
      <div class="subtitle">
        Add and update project milestones and timeline
      </div>
    </div>
    <button class="btn" onclick="openMilestoneModal()">Ôºã Add Milestone</button>
  </div>
  <br>

  <!-- Milestone Item -->
  <div class="milestone-card">
    <div>
      <strong>Land Clearance & Site Preparation</strong>
      <span class="badge completed">Completed</span>
      <div class="subtitle">
        <br>
        Planned: 2023-02-01 ‚Ä¢ Completed: 2023-02-05
      </div>
    </div>
    ‚úè Edit
  </div>

  <div class="milestone-card">
    <div>
      <strong>10th Floor Slab Cast</strong>
      <span class="badge completed">Completed</span>
      <span class="badge delayed">Delayed</span>
      <div class="subtitle"><br>
        Planned: 2024-09-30 ‚Ä¢ Completed: 2024-10-15
      </div>
      <div class="delay-box">
        Delay Reason: Monsoon season caused 15-day delay
      </div>
    </div>
    ‚úè Edit
  </div>

</div>

<!-- GALLERY VIEW -->
<div class="card" id="galleryView" style="display:none">
  <div class="card-header">
    <div>
      <h2>Manage Photo & Video Gallery</h2>
      <div class="subtitle">Upload weekly construction site updates</div>
    </div>
    <button class="btn" onclick="openAddMediaModal()">Ôºã Add Media</button>
  </div>
  <br>
  
  <!-- Gallery Grid - MOVED INSIDE THE CARD -->
  <div class="gallery-grid">
    <!-- PHOTO -->
    <div class="gallery-card" onclick="openMedia('image','/images/1.PNG')">
      <span class="media-badge">üì∑ Photo</span>
      <img src="/images/1.PNG">
      <div class="gallery-info">
        <strong>10th floor slab completed ‚Äì aerial view</strong>
        <div class="subtitle">10th Floor Slab Cast</div>
        <small>2024-11-10</small>
      </div>
    </div>
    <!-- PHOTO -->
    <div class="gallery-card" onclick="openMedia('image','/images/2.PNG')">
      <span class="media-badge">üì∑ Photo</span>
      <img src="/images/2.PNG">
      <div class="gallery-info">
        <strong>Concrete pouring in progress</strong>
        <div class="subtitle">10th Floor Slab Cast</div>
        <small>2024-11-03</small>
      </div>
    </div>
    <!-- VIDEO -->
    <div class="gallery-card" onclick="openMedia('video','https://www.w3schools.com/html/mov_bbb.mp4')">
      <span class="media-badge">üé• Video</span>
      <img src="https://images.unsplash.com/photo-1503387762-592deb58ef4e">
      <div class="gallery-info">
        <strong>Structural framework completion</strong>
        <div class="subtitle">10th Floor Slab Cast</div>
        <small>2024-10-20</small>
      </div>
    </div>
  </div>
</div>


<div id="customizationView" style="display:none">
  <div class="card">
    <div class="card-header">
      <div>
        <h2>Manage Customization Options</h2>
        <div class="subtitle">Control customization windows and available options.</div>
      </div>
      <div>
        <button class="btn" onclick="openCustomizationModal()">Ôºã Add Option</button>
      </div>
    </div>
    <br>
    <table>
      <thead>
        <tr>
          <th>Category</th>
          <th>Status</th>
          <th>Options</th>
          <th>Window</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Floor Tiles</td>
          <td><span class="status">Closed</span></td>
          <td>3 options</td>
          <td>2025-12-01 to 2026-01-15</td>
        </tr>
        <tr>
          <td>Bathroom Fixtures</td>
          <td><span class="status">Closed</span></td>
          <td>3 options</td>
          <td>2025-12-01 to 2026-01-15</td>
        </tr>
        <tr>
          <td>Wall Paint Palette</td>
          <td><span class="status upcoming">Upcoming</span></td>
          <td>3 options</td>
          <td>2026-02-01 to 2026-03-15</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-box">
    <div class="modal-header">
      <div>
        <h3>Add New Shareholder</h3>
        <div class="subtitle">Enter shareholder details below</div>
      </div>
      <span class="close" onclick="closeModal()">√ó</span>
    </div>

    <div class="form-grid">
      <input id="name" placeholder="Full Name">
      <input id="flat" placeholder="Flat Number">
      <input id="email" placeholder="Email">
      <input id="phone" placeholder="Phone">
      <input id="shareId" placeholder="Share ID" readonly>
      <input id="amount" placeholder="Total Amount">
    </div>

    <div class="form-actions">
      <button class="btn" style="background:#ddd;color:#000" onclick="closeModal()">Cancel</button>
      <button class="btn" onclick="addShareholder()">Add Shareholder</button>
    </div>
  </div>
</div>

<div class="modal" id="milestoneModal">
  <div class="modal-box" style="width:520px">

    <div class="modal-header">
      <div>
        <h3>Add New Milestone</h3>
        <div class="subtitle">Create a new construction milestone</div>
      </div>
      <span class="close" onclick="closeMilestoneModal()">√ó</span>
    </div>

    <div class="form-grid">
      <input placeholder="e.g., 11th Floor Slab Cast">
      <input type="date">
      <select>
        <option>Planned</option>
        <option>In Progress</option>
        <option>Completed</option>
        <option>Delayed</option>
      </select>
    </div>

    <div class="form-actions">
      <button class="btn" style="background:#ddd;color:#000"
              onclick="closeMilestoneModal()">Cancel</button>
      <button class="btn">Add Milestone</button>
    </div>

  </div>
</div>

<div class="modal" id="addMediaModal">
  <div class="modal-box" style="width:520px">

    <div class="modal-header">
      <div>
        <h3>Upload Photo/Video</h3>
        <div class="subtitle">Add construction site media to the gallery</div>
      </div>
      <span class="close" onclick="closeAddMediaModal()">√ó</span>
    </div>

    <div class="form-grid">
      <div>
      Choose Media Type: 
      <select>
        <option>Photo</option>
        <option>Video</option>
      </select></div>

<div class="upload-box" onclick="triggerFileUpload()">
  ‚¨Ü Click to upload or drag and drop<br>
  <small id="upload-hint">
    Photos: JPG/PNG up to 10MB ‚Ä¢ Videos: MP4 up to 50MB
  </small>

  <!-- hidden file input -->
  <input type="file"
         id="mediaInput"
         hidden
         onchange="handleFileSelect(this)">
</div>


      <input type="date" placeholder="Date Captured">

      <input style="grid-column:1/-1"
             placeholder="Brief description of the photo/video">
    </div>

    <div class="form-actions">
      <button class="btn light-btn" onclick="closeAddMediaModal()">Cancel</button>
      <button class="btn">Upload Media</button>
    </div>

  </div>
</div>


<script>

function triggerFileUpload() {
  document.getElementById('mediaInput').click();
}

function handleFileSelect(input) {
  if (!input.files || !input.files.length) return;

  const file = input.files[0];
  const uploadBox = input.closest('.upload-box');

  uploadBox.classList.add('has-file');
  uploadBox.innerHTML = `
    ‚úÖ File selected<br>
    <strong>${file.name}</strong>
    <br><small>${(file.size / 1024 / 1024).toFixed(2)} MB</small>
  `;
}

function openAddMediaModal(){
  document.getElementById('addMediaModal').classList.add('active');
}

function closeAddMediaModal(){
  document.getElementById('addMediaModal').classList.remove('active');
}

function generateRDC(name, installment) {
  if (!name || !installment) return '';

  const namePart = name.replace(/\s+/g, '').substring(0, 3).toUpperCase();
  const instMatch = installment.match(/\d+/);
  const instNumber = instMatch ? instMatch[0] : 'X';
  const year = new Date().getFullYear();

  return `RDC-${namePart}-${instNumber}-${year}`;
}

document.getElementById('paymentShareholder').addEventListener('change', updateRDC);
document.getElementById('paymentInstallment').addEventListener('change', updateRDC);

function updateRDC() {
  const name = document.getElementById('paymentShareholder').value;
  const installment = document.getElementById('paymentInstallment').value;
  document.getElementById('rdcId').value = generateRDC(name, installment);
}

  function openPaymentModal() {
  document.getElementById('paymentModal').classList.add('active');
}

function closePaymentModal() {
  document.getElementById('paymentModal').classList.remove('active');
}

function showTab(tab, el) {
  // Hide all views
  document.getElementById('shareholdersView').style.display = 'none';
  document.getElementById('paymentsView').style.display = 'none';
  document.getElementById('costsView').style.display = 'none';
  document.getElementById('milestonesView').style.display = 'none';
  document.getElementById('galleryView').style.display = 'none';
  document.getElementById('customizationView').style.display = 'none';

  // Show the selected tab
  if (tab === 'shareholders') {
    document.getElementById('shareholdersView').style.display = 'block';
  } else if (tab === 'payments') {
    document.getElementById('paymentsView').style.display = 'block';
  } else if (tab === 'costs') {
    document.getElementById('costsView').style.display = 'block';
  } else if (tab === 'milestones') {
    document.getElementById('milestonesView').style.display = 'block';
  } else if (tab === 'gallery') {
    document.getElementById('galleryView').style.display = 'block';
  } else if (tab === 'customization') {
    document.getElementById('customizationView').style.display = 'block';
  }

  // Update tab styling
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
}
function openModal() {
  document.getElementById('modal').classList.add('active');
}

function closeModal() {
  document.getElementById('modal').classList.remove('active');
}

/* Generate Share ID from name + mobile */
function generateShareId(name, phone) {
  const cleanName = name.replace(/\s+/g, '').substring(0, 4).toUpperCase();
  const lastDigits = phone.slice(-4);
  return `SH-${cleanName}-${lastDigits}`;
}

document.getElementById('phone').addEventListener('input', () => {
  const name = document.getElementById('name').value;
  const phone = document.getElementById('phone').value;
  if (name && phone.length >= 4) {
    document.getElementById('shareId').value = generateShareId(name, phone);
  }
});

function addShareholder() {
  const name = document.getElementById('name').value;
  const flat = document.getElementById('flat').value;
  const email = document.getElementById('email').value;
  const phone = document.getElementById('phone').value;
  const shareId = document.getElementById('shareId').value;

  if (!name || !phone) return alert("Name & phone required");

  const row = `
    <tr>
      <td>${shareId}</td>
      <td>${name}</td>
      <td>${flat}</td>
      <td>${email}<br>${phone}</td>
      <td>0</td>
      <td><span class="status">Active</span></td>
      <td>‚úèÔ∏è</td>
    </tr>
  `;

  document.getElementById('tableBody').insertAdjacentHTML('beforeend', row);
  closeModal();
  // Default tab
document.getElementById('shareholdersView').style.display = 'none';
document.getElementById('paymentsView').style.display = 'block';
document.getElementById('costsView').style.display = 'none';
}

function openVoucherModal() {
  document.getElementById('voucherModal').classList.add('active');
}

function closeVoucherModal() {
  document.getElementById('voucherModal').classList.remove('active');
}

function openMilestoneModal() {
  document.getElementById('milestoneModal').classList.add('active');
}

function closeMilestoneModal() {
  document.getElementById('milestoneModal').classList.remove('active');
}

function openMedia(type, src){
  document.getElementById('mediaModal').classList.add('active');

  const img = document.getElementById('mediaImage');
  const video = document.getElementById('mediaVideo');

  img.style.display = 'none';
  video.style.display = 'none';
  video.pause();

  if(type === 'image'){
    img.src = src;
    img.style.display = 'block';
  } else {
    video.src = src;
    video.style.display = 'block';
    video.play();
  }
}

function closeMedia(){
  document.getElementById('mediaModal').classList.remove('active');
  document.getElementById('mediaVideo').pause();
}

function openCustomizationModal() {
  document.getElementById('customizationModal').classList.add('active');
}

function closeCustomizationModal() {
  document.getElementById('customizationModal').classList.remove('active');
}

function openSwitchProjectMenu(e) {
  e.stopPropagation();
  document.getElementById('switchProjectMenu').classList.toggle('hidden');
}

/* CORE LOGIC */
function switchProject(projectName) {
  const text = document.getElementById('success-popup-text');
  text.textContent = `‚úÖ Switched to ${projectName}`;

  showSuccessPopup();

  // Close dropdown
  document.getElementById('switchProjectMenu').classList.add('hidden');

  // Reload after popup
  setTimeout(() => {
    location.reload();
  }, 2200);
}

/* Close dropdown on outside click */
document.addEventListener('click', (e) => {
  const menu = document.getElementById('switchProjectMenu');
  const switchTab = e.target.closest('.tab');

  if (!menu.contains(e.target) && !switchTab) {
    menu.classList.add('hidden');
  }
});

/* Popup helper (you already have this element) */
function showSuccessPopup() {
  const popup = document.getElementById('success-popup');
  popup.classList.remove('hidden');

  setTimeout(() => {
    popup.classList.add('hidden');
  }, 2001);
}

</script>

<div class="modal" id="paymentModal">
  <div class="modal-box" style="width:560px">
    <div class="modal-header">
      <div>
        <h3>Record New Payment</h3>
        <div class="subtitle">Enter payment details and upload receipt</div>
      </div>
      <span class="close" onclick="closePaymentModal()">√ó</span>
    </div>
    <div class="form-grid">
<select id="paymentShareholder">
  <option value="">Select shareholder</option>
  <option>Maryam</option>
  <option>Musab</option>
</select>

<select id="paymentInstallment">
  <option value="">Select installment</option>
  <option>5th Construction Installment</option>
  <option>6th Construction Installment</option>
</select>

<input id="rdcId" placeholder="RDC-AUTO-GENERATED" readonly>
      <input placeholder="Amount Paid">
      <input type="date">
    </div>
    <div style="
      margin-top:16px;
      border:2px dashed var(--border);
      border-radius:12px;
      padding:24px;
      text-align:center;
      color:var(--muted);
    ">
      ‚¨Ü Click to upload or drag and drop<br>
      <small>PDF files up to 10MB</small>
    </div>
    <div class="form-actions">
      <button class="btn" style="background:#ddd;color:#000" onclick="closePaymentModal()">Cancel</button>
      <button class="btn">Add Payment</button>
    </div>
  </div>
</div>

<!-- ADD VOUCHER MODAL -->
<div class="modal" id="voucherModal">
  <div class="modal-box" style="width:560px">

    <div class="modal-header">
      <div>
        <h3>Add Vendor Voucher</h3>
        <div class="subtitle">Record major purchase and upload invoice</div>
      </div>
      <span class="close" onclick="closeVoucherModal()">√ó</span>
    </div>

    <div class="form-grid">
      <input placeholder="VCH-2024-XXX">
      <input type="date">

      <input placeholder="e.g., Steel Rebar - 5th Floor Slab">
      <input placeholder="e.g., Jindal Steel Suppliers">

      <input placeholder="Amount">
      <select>
        <option>Select category</option>
        <option>Steel/Rebar</option>
        <option>Cement/Aggregate</option>
        <option>Labor & Manpower</option>
        <option>Finishing Materials</option>
        <option>Other Expenses</option>
      </select>
    </div>

    <div style="
      margin-top:16px;
      border:2px dashed var(--border);
      border-radius:12px;
      padding:24px;
      text-align:center;
      color:var(--muted);
    ">
      ‚¨Ü Click to upload or drag and drop<br>
      <small>PDF files up to 10MB</small>
    </div>

    <div class="form-actions">
      <button class="btn" style="background:#ddd;color:#000" onclick="closeVoucherModal()">
        Cancel
      </button>
      <button class="btn">
        Add Voucher
      </button>
    </div>

  </div>
</div>

<div class="modal" id="mediaModal">
  <div class="modal-box" style="width:800px">
    <span class="close" onclick="closeMedia()">√ó</span>

    <img id="mediaImage" style="width:100%;display:none;border-radius:12px">
    
    <video id="mediaVideo" controls style="width:100%;display:none;border-radius:12px"></video>
  </div>
</div>

<div class="modal" id="customizationModal">
  <div class="modal-box" style="width:560px">
    <div class="modal-header">
      <div>
        <h3>Add Customization Option</h3>
        <div class="subtitle">Create a new option for shareholders to choose</div>
      </div>
      <span class="close" onclick="closeCustomizationModal()">√ó</span>
    </div>
    <div class="form-grid">
      <select>
        <option>Select category</option>
        <option>Floor Tiles</option>
        <option>Bathroom Fixtures</option>
        <option>Wall Paint Palette</option>
      </select>
      <input placeholder="e.g., Premium Vitrified Tiles">
      <input placeholder="e.g., Kajaria">
      <input placeholder="0 for standard, amount for up">
      <select>
        <option>Upgrade (Additional Cost)</option>
        <option>Standard (No Cost)</option>
      </select>
      <input placeholder="Image URL or upload">
      <input type="date" placeholder="Opening Date">
      <input type="date" placeholder="Closing Date">
    </div>
    <div class="form-actions">
      <button class="btn" style="background:#ddd;color:#000" onclick="closeCustomizationModal()">Cancel</button>
      <button class="btn">Add Option</button>
    </div>
  </div>
</div>

<div id="success-popup" class="success-popup hidden">
    <i class="fas fa-check-circle"></i>
    <span id="success-popup-text">Success</span>
</div>

</body>
</html>